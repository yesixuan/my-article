---
title: JS 基础进阶（一）
tags: ["js","堆栈","内存"]
date: 2017-05-04 09:43:00
categories:
- 前端
- JS
---
> 本节通过了解JS中变量在计算机中的内存中存储方式来解释JS中的一些难题，按值传递和引用传递...

<!-- more -->
### 栈与堆
JS中没有严格区分栈内存与堆内存。、
#### 栈
栈的存取方式就像是往乒乓球盒子里面存放乒乓球。先进后出，后进先出。
#### 堆
堆内存的存取方式就像是从书架上拿书。我们只需要知道某本书的名字就可以从书架上准确地拿到该书。

### JS中的基础数据类型与引用数据类型的存储
#### 变量对象（变量对象其实也是存在堆内存中的，但它比较特殊，所以把它单独提出来）
- 基础数据类型是统一存储在一个变量对象上的。var a = 1;相当于：变量对象.a = 1;
- 复制变量对象中的变量时会为新变量分配一个新值，这个值与之前的直没有关系
#### 引用数据类型
- 引用数据都是存在堆内存中的
- 一个引用数据的内存由三个部分构成：变量对象中存储变量名与内存地址（内存指针）、堆内存中存储键值对、内存地址指向堆内存中的一个引用类型数据
- 复制一个引用类型的数据其实是给了新变量一个新的内存地址（这个过程发生在变量对象中）。这个新的内存地址与原来的内存地址指向的是同一个引用类型数据
### 内存空间管理
#### JS的内存生命周期
```JS
  var a = 20;  // 在内存中给数值变量分配空间
  alert(a + 100);  // 使用内存
  a = null; // 使用完毕之后，释放内存空间
```
    给a赋值null的目的是让a原本对应的值失去引用，脱离执行环境，这个值会在下一次垃圾收集器执行操作时被找到并释放。
    在局部作用域中，当函数执行完毕，局部变量也就没有存在的必要了。因此垃圾收集器很容易做出判断并回收。但是全局变量什么时候需要自动释放内存空间则很难判断，因此在我们的开发中，需要尽量避免使用全局变量，以确保性能问题。
